{
	"info": {
		"_postman_id": "staff-enhanced-features-api",
		"name": "Staff Enhanced Features API",
		"description": "Complete API collection for Staff Enhanced Features including appointments, WhatsApp, automation, ads, and permission requests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "staff-enhanced-features"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Staff Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"staff@example.com\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				},
				{
					"name": "Coach Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"coach@example.com\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Enhanced Permissions",
			"item": [
				{
					"name": "Get All Permissions",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/permissions",
							"host": ["{{base_url}}"],
							"path": ["api", "permissions"]
						}
					},
					"response": []
				},
				{
					"name": "Get Permission Groups",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/permissions/groups",
							"host": ["{{base_url}}"],
							"path": ["api", "permissions", "groups"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Appointment Management",
			"item": [
				{
					"name": "Get Staff Appointments",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/appointments",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "appointments"]
						}
					},
					"response": []
				},
				{
					"name": "Create Appointment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"Client Consultation\",\n    \"startTime\": \"2025-01-25T10:00:00Z\",\n    \"endTime\": \"2025-01-25T11:00:00Z\",\n    \"clientId\": \"65a1b2c3d4e5f6789012345a\",\n    \"notes\": \"Initial consultation call\",\n    \"type\": \"consultation\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/appointments",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "appointments"]
						}
					},
					"response": []
				},
				{
					"name": "Update Appointment",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"notes\": \"Updated notes for the appointment\",\n    \"status\": \"confirmed\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/appointments/:appointmentId",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "appointments", ":appointmentId"],
							"variable": [
								{
									"key": "appointmentId",
									"value": "65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Reschedule Appointment",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"startTime\": \"2025-01-26T14:00:00Z\",\n    \"endTime\": \"2025-01-26T15:00:00Z\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/appointments/:appointmentId/reschedule",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "appointments", ":appointmentId", "reschedule"],
							"variable": [
								{
									"key": "appointmentId",
									"value": "65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "WhatsApp Messaging",
			"item": [
				{
					"name": "Send WhatsApp Message",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"to\": \"+1234567890\",\n    \"message\": \"Hello! This is a test message from our staff team.\",\n    \"templateId\": \"template_1\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/whatsapp/send",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "whatsapp", "send"]
						}
					},
					"response": []
				},
				{
					"name": "Get WhatsApp Templates",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/whatsapp/templates",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "whatsapp", "templates"]
						}
					},
					"response": []
				},
				{
					"name": "Get WhatsApp Messages",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/whatsapp/messages",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "whatsapp", "messages"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Automation Rules",
			"item": [
				{
					"name": "Get Automation Rules",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/automation/rules",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "automation", "rules"]
						}
					},
					"response": []
				},
				{
					"name": "Create Automation Rule",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Welcome New Leads\",\n    \"description\": \"Automatically send welcome message to new leads\",\n    \"trigger\": {\n        \"type\": \"lead_created\",\n        \"conditions\": {\n            \"source\": \"website\"\n        }\n    },\n    \"actions\": [\n        {\n            \"type\": \"send_whatsapp\",\n            \"templateId\": \"welcome_template\",\n            \"delay\": 0\n        }\n    ],\n    \"isActive\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/automation/rules",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "automation", "rules"]
						}
					},
					"response": []
				},
				{
					"name": "Update Automation Rule",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"isActive\": false,\n    \"description\": \"Updated description for the automation rule\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/automation/rules/:ruleId",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "automation", "rules", ":ruleId"],
							"variable": [
								{
									"key": "ruleId",
									"value": "65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Execute Automation Rule",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/automation/rules/:ruleId/execute",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "automation", "rules", ":ruleId", "execute"],
							"variable": [
								{
									"key": "ruleId",
									"value": "65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Ads & Campaigns",
			"item": [
				{
					"name": "Get Ad Campaigns",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/ads/campaigns",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "ads", "campaigns"]
						}
					},
					"response": []
				},
				{
					"name": "Create Ad Campaign",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Summer Weight Loss Campaign\",\n    \"description\": \"Targeted campaign for weight loss services\",\n    \"platform\": \"facebook\",\n    \"budget\": 1000,\n    \"targetAudience\": {\n        \"age\": \"25-45\",\n        \"interests\": [\"fitness\", \"weight loss\", \"health\"]\n    },\n    \"creative\": {\n        \"headline\": \"Transform Your Body This Summer\",\n        \"description\": \"Join our proven weight loss program\",\n        \"imageUrl\": \"https://example.com/image.jpg\"\n    },\n    \"status\": \"draft\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/ads/campaigns",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "ads", "campaigns"]
						}
					},
					"response": []
				},
				{
					"name": "Update Ad Campaign",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"budget\": 1500,\n    \"status\": \"ready_to_publish\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/ads/campaigns/:campaignId",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "ads", "campaigns", ":campaignId"],
							"variable": [
								{
									"key": "campaignId",
									"value": "65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Publish Ad Campaign",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/ads/campaigns/:campaignId/publish",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "ads", "campaigns", ":campaignId", "publish"],
							"variable": [
								{
									"key": "campaignId",
									"value": "65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Ad Campaign Analytics",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/ads/campaigns/:campaignId/analytics",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "ads", "campaigns", ":campaignId", "analytics"],
							"variable": [
								{
									"key": "campaignId",
									"value": "65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Permission Requests",
			"item": [
				{
					"name": "Request Additional Permissions",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"permissions\": [\n        \"funnels:write\",\n        \"funnels:publish\",\n        \"ads:write\",\n        \"ads:publish\"\n    ],\n    \"reason\": \"I need these permissions to create and manage marketing campaigns for the upcoming product launch. This will help me better support the coach's business goals.\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/permissions/request",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "permissions", "request"]
						}
					},
					"response": []
				},
				{
					"name": "Get Permission Requests",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{coach_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/permissions/requests",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "permissions", "requests"]
						}
					},
					"response": []
				},
				{
					"name": "Approve Permission Request",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{coach_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/permissions/requests/:requestId/approve",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "permissions", "requests", ":requestId", "approve"],
							"variable": [
								{
									"key": "requestId",
									"value": "req_65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Deny Permission Request",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{coach_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"reason\": \"These permissions require additional training and approval from senior management. Please complete the funnel management course first.\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/staff-unified/v1/permissions/requests/:requestId/deny",
							"host": ["{{base_url}}"],
							"path": ["api", "staff-unified", "v1", "permissions", "requests", ":requestId", "deny"],
							"variable": [
								{
									"key": "requestId",
									"value": "req_65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Coach Staff Management",
			"item": [
				{
					"name": "Create Staff with Enhanced Permissions",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{coach_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Marketing Specialist\",\n    \"email\": \"marketing@example.com\",\n    \"password\": \"securePassword123\",\n    \"permissions\": [\n        \"leads:read\",\n        \"leads:write\",\n        \"leads:update\",\n        \"funnels:read\",\n        \"funnels:write\",\n        \"funnels:update\",\n        \"ads:read\",\n        \"ads:write\",\n        \"ads:update\",\n        \"whatsapp:read\",\n        \"whatsapp:send\",\n        \"automation:read\",\n        \"automation:write\",\n        \"appointments:read\",\n        \"appointments:write\",\n        \"permissions:request\"\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/coach/staff",
							"host": ["{{base_url}}"],
							"path": ["api", "coach", "staff"]
						}
					},
					"response": []
				},
				{
					"name": "Assign WhatsApp Manager Group",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{coach_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"groupName\": \"WhatsApp Manager\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/coach/staff/:staffId/permission-group",
							"host": ["{{base_url}}"],
							"path": ["api", "coach", "staff", ":staffId", "permission-group"],
							"variable": [
								{
									"key": "staffId",
									"value": "65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Assign Ads Manager Group",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{coach_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"groupName\": \"Ads Manager\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/coach/staff/:staffId/permission-group",
							"host": ["{{base_url}}"],
							"path": ["api", "coach", "staff", ":staffId", "permission-group"],
							"variable": [
								{
									"key": "staffId",
									"value": "65a1b2c3d4e5f6789012345a"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:5000",
			"type": "string"
		},
		{
			"key": "token",
			"value": "",
			"type": "string"
		},
		{
			"key": "staff_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "coach_token",
			"value": "",
			"type": "string"
		}
	]
}
