{
  "info": {
    "name": "Staff Dashboard Unified API",
    "description": "Complete API collection for the Unified Staff Dashboard system",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000/api/staff-dashboard/unified",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Dashboard Overview",
      "item": [
        {
          "name": "Get Complete Dashboard Data",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/data?timeRange=30&sections=overview,tasks,performance",
              "host": ["{{base_url}}"],
              "path": ["data"],
              "query": [
                {
                  "key": "timeRange",
                  "value": "30",
                  "description": "Number of days to look back"
                },
                {
                  "key": "sections",
                  "value": "overview,tasks,performance",
                  "description": "Comma-separated sections to include"
                }
              ]
            }
          }
        },
        {
          "name": "Get Overview Data",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/overview",
              "host": ["{{base_url}}"],
              "path": ["overview"]
            }
          }
        },
        {
          "name": "Get Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/notifications",
              "host": ["{{base_url}}"],
              "path": ["notifications"]
            }
          }
        }
      ]
    },
    {
      "name": "Task Management",
      "item": [
        {
          "name": "Get All Tasks",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/tasks?status=In Progress&priority=HIGH&page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["tasks"],
              "query": [
                {
                  "key": "status",
                  "value": "In Progress",
                  "description": "Filter by task status"
                },
                {
                  "key": "priority",
                  "value": "HIGH",
                  "description": "Filter by task priority"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Tasks per page"
                }
              ]
            }
          }
        },
        {
          "name": "Get Personal Task Overview",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/tasks/my-tasks?timeRange=30",
              "host": ["{{base_url}}"],
              "path": ["tasks", "my-tasks"],
              "query": [
                {
                  "key": "timeRange",
                  "value": "30",
                  "description": "Number of days to look back"
                }
              ]
            }
          }
        },
        {
          "name": "Get Overdue Tasks",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/tasks/overdue",
              "host": ["{{base_url}}"],
              "path": ["tasks", "overdue"]
            }
          }
        },
        {
          "name": "Get Upcoming Tasks",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/tasks/upcoming?days=7",
              "host": ["{{base_url}}"],
              "path": ["tasks", "upcoming"],
              "query": [
                {
                  "key": "days",
                  "value": "7",
                  "description": "Number of days ahead"
                }
              ]
            }
          }
        },
        {
          "name": "Get Specific Task",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/tasks/:taskId",
              "host": ["{{base_url}}"],
              "path": ["tasks", ":taskId"],
              "variable": [
                {
                  "key": "taskId",
                  "value": "task_id_here",
                  "description": "Task ID"
                }
              ]
            }
          }
        },
        {
          "name": "Update Task Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"Completed\",\n  \"notes\": \"Task completed successfully\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/tasks/:taskId/status",
              "host": ["{{base_url}}"],
              "path": ["tasks", ":taskId", "status"],
              "variable": [
                {
                  "key": "taskId",
                  "value": "task_id_here",
                  "description": "Task ID"
                }
              ]
            }
          }
        },
        {
          "name": "Complete Task",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"completionNotes\": \"Task completed successfully\",\n  \"actualHours\": 1.5,\n  \"outcome\": \"Lead qualified and interested\",\n  \"qualityRating\": 9,\n  \"feedback\": \"Great interaction with the lead\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/tasks/:taskId/complete",
              "host": ["{{base_url}}"],
              "path": ["tasks", ":taskId", "complete"],
              "variable": [
                {
                  "key": "taskId",
                  "value": "task_id_here",
                  "description": "Task ID"
                }
              ]
            }
          }
        },
        {
          "name": "Start Task",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/tasks/:taskId/start",
              "host": ["{{base_url}}"],
              "path": ["tasks", ":taskId", "start"],
              "variable": [
                {
                  "key": "taskId",
                  "value": "task_id_here",
                  "description": "Task ID"
                }
              ]
            }
          }
        },
        {
          "name": "Pause Task",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/tasks/:taskId/pause",
              "host": ["{{base_url}}"],
              "path": ["tasks", ":taskId", "pause"],
              "variable": [
                {
                  "key": "taskId",
                  "value": "task_id_here",
                  "description": "Task ID"
                }
              ]
            }
          }
        },
        {
          "name": "Add Task Comment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"comment\": \"Working on this task, will complete by end of day\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/tasks/:taskId/comments",
              "host": ["{{base_url}}"],
              "path": ["tasks", ":taskId", "comments"],
              "variable": [
                {
                  "key": "taskId",
                  "value": "task_id_here",
                  "description": "Task ID"
                }
              ]
            }
          }
        },
        {
          "name": "Log Time to Task",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hours\": 1.5,\n  \"description\": \"Initial research and preparation\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/tasks/:taskId/time-log",
              "host": ["{{base_url}}"],
              "path": ["tasks", ":taskId", "time-log"],
              "variable": [
                {
                  "key": "taskId",
                  "value": "task_id_here",
                  "description": "Task ID"
                }
              ]
            }
          }
        },
        {
          "name": "Bulk Update Tasks",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"taskIds\": [\"task_id_1\", \"task_id_2\", \"task_id_3\"],\n  \"updates\": {\n    \"status\": \"In Progress\",\n    \"priority\": \"HIGH\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/tasks/bulk-update",
              "host": ["{{base_url}}"],
              "path": ["tasks", "bulk-update"]
            }
          }
        }
      ]
    },
    {
      "name": "Calendar Management",
      "item": [
        {
          "name": "Get Calendar Events",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/calendar?startDate=2024-01-01&endDate=2024-01-31&eventType=meeting&page=1&limit=50",
              "host": ["{{base_url}}"],
              "path": ["calendar"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01",
                  "description": "Start date for filtering"
                },
                {
                  "key": "endDate",
                  "value": "2024-01-31",
                  "description": "End date for filtering"
                },
                {
                  "key": "eventType",
                  "value": "meeting",
                  "description": "Filter by event type"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Events per page"
                }
              ]
            }
          }
        },
        {
          "name": "Create Calendar Event",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"staffId\": \"staff_id_here\",\n  \"eventType\": \"meeting\",\n  \"title\": \"Client Call\",\n  \"description\": \"Follow-up call with potential client\",\n  \"startTime\": \"2024-01-16T14:00:00.000Z\",\n  \"endTime\": \"2024-01-16T15:00:00.000Z\",\n  \"priority\": \"high\",\n  \"isRecurring\": false,\n  \"location\": \"Office\",\n  \"attendees\": [\n    {\n      \"userId\": \"staff_id_here\",\n      \"name\": \"Staff Name\",\n      \"email\": \"staff@example.com\",\n      \"role\": \"staff\"\n    }\n  ],\n  \"notes\": \"Prepare proposal beforehand\",\n  \"tags\": [\"client\", \"call\"],\n  \"color\": \"#ff6b6b\",\n  \"isPublic\": false,\n  \"reminder\": {\n    \"enabled\": true,\n    \"time\": 30\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/calendar",
              "host": ["{{base_url}}"],
              "path": ["calendar"]
            }
          }
        },
        {
          "name": "Update Calendar Event",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Client Call\",\n  \"startTime\": \"2024-01-16T15:00:00.000Z\",\n  \"endTime\": \"2024-01-16T16:00:00.000Z\",\n  \"notes\": \"Updated notes\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/calendar/:eventId",
              "host": ["{{base_url}}"],
              "path": ["calendar", ":eventId"],
              "variable": [
                {
                  "key": "eventId",
                  "value": "event_id_here",
                  "description": "Event ID"
                }
              ]
            }
          }
        },
        {
          "name": "Delete Calendar Event",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/calendar/:eventId",
              "host": ["{{base_url}}"],
              "path": ["calendar", ":eventId"],
              "variable": [
                {
                  "key": "eventId",
                  "value": "event_id_here",
                  "description": "Event ID"
                }
              ]
            }
          }
        },
        {
          "name": "Get Staff Availability",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/calendar/staff/:staffId/availability?startTime=2024-01-16T09:00:00.000Z&endTime=2024-01-16T17:00:00.000Z",
              "host": ["{{base_url}}"],
              "path": ["calendar", "staff", ":staffId", "availability"],
              "query": [
                {
                  "key": "startTime",
                  "value": "2024-01-16T09:00:00.000Z",
                  "description": "Start time for availability check"
                },
                {
                  "key": "endTime",
                  "value": "2024-01-16T17:00:00.000Z",
                  "description": "End time for availability check"
                }
              ],
              "variable": [
                {
                  "key": "staffId",
                  "value": "staff_id_here",
                  "description": "Staff ID"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Appointment Management",
      "item": [
        {
          "name": "Assign Appointment to Staff",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"appointmentId\": \"appointment_id_here\",\n  \"staffId\": \"staff_id_here\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/appointments/assign",
              "host": ["{{base_url}}"],
              "path": ["appointments", "assign"]
            }
          }
        },
        {
          "name": "Get Staff Appointments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/appointments/staff/:staffId?startDate=2024-01-01&endDate=2024-01-31&status=scheduled&page=1&limit=20",
              "host": ["{{base_url}}"],
              "path": ["appointments", "staff", ":staffId"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01",
                  "description": "Start date for filtering"
                },
                {
                  "key": "endDate",
                  "value": "2024-01-31",
                  "description": "End date for filtering"
                },
                {
                  "key": "status",
                  "value": "scheduled",
                  "description": "Filter by appointment status"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Appointments per page"
                }
              ],
              "variable": [
                {
                  "key": "staffId",
                  "value": "staff_id_here",
                  "description": "Staff ID"
                }
              ]
            }
          }
        },
        {
          "name": "Get Available Staff",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/appointments/available-staff?appointmentDate=2024-01-16&appointmentTime=14:00&duration=30",
              "host": ["{{base_url}}"],
              "path": ["appointments", "available-staff"],
              "query": [
                {
                  "key": "appointmentDate",
                  "value": "2024-01-16",
                  "description": "Date for the appointment"
                },
                {
                  "key": "appointmentTime",
                  "value": "14:00",
                  "description": "Time for the appointment"
                },
                {
                  "key": "duration",
                  "value": "30",
                  "description": "Duration in minutes"
                }
              ]
            }
          }
        },
        {
          "name": "Unassign Appointment",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{base_url}}/appointments/:appointmentId/unassign",
              "host": ["{{base_url}}"],
              "path": ["appointments", ":appointmentId", "unassign"],
              "variable": [
                {
                  "key": "appointmentId",
                  "value": "appointment_id_here",
                  "description": "Appointment ID"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Question Response Submission",
      "item": [
        {
          "name": "Submit Question Responses",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"leadId\": \"{{sample_lead_id}}\",\n  \"questionResponses\": {\n    \"clientQuestions\": {\n      \"watchedVideo\": \"Yes\",\n      \"readyToStart\": \"Yes\",\n      \"willingToInvest\": \"Yes\",\n      \"seriousnessScale\": 9,\n      \"currentChallenges\": \"Weight loss and energy levels\",\n      \"motivation\": \"Health and confidence\"\n    },\n    \"coachQuestions\": {\n      \"fullName\": \"John Doe\",\n      \"email\": \"john@example.com\",\n      \"whatsappNumber\": \"+1234567890\",\n      \"instagramUsername\": \"@johndoe\",\n      \"description\": \"Business owner\",\n      \"watchedVideo\": \"Yes, 100%\",\n      \"reasonForBooking\": \"Want to start coaching business\",\n      \"supplements\": \"Currently taking multivitamins\",\n      \"mlmExperience\": \"None\",\n      \"readiness\": \"100% ready\",\n      \"commitment\": \"Yes, fully committed\",\n      \"timeCommitment\": \"3-4 hours/day\",\n      \"canAttendZoom\": \"Yes\",\n      \"understandsOpportunity\": \"Yes\",\n      \"additionalInfo\": \"Ready to start immediately\"\n    }\n  },\n  \"appointmentData\": {\n    \"preferredTime\": \"14:00\",\n    \"preferredDate\": \"2024-01-20\",\n    \"timezone\": \"America/New_York\",\n    \"notes\": \"Prefer afternoon appointments\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/../leads/question-responses",
              "host": ["{{base_url}}"],
              "path": ["..", "leads", "question-responses"]
            }
          }
        }
      ]
    },
    {
      "name": "Performance & Analytics",
      "item": [
        {
          "name": "Get Staff Performance",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/performance?timeRange=30",
              "host": ["{{base_url}}"],
              "path": ["performance"],
              "query": [
                {
                  "key": "timeRange",
                  "value": "30",
                  "description": "Number of days to look back"
                }
              ]
            }
          }
        },
        {
          "name": "Get Performance Metrics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/performance/metrics?timeRange=30&includeDetails=true",
              "host": ["{{base_url}}"],
              "path": ["performance", "metrics"],
              "query": [
                {
                  "key": "timeRange",
                  "value": "30",
                  "description": "Number of days to look back"
                },
                {
                  "key": "includeDetails",
                  "value": "true",
                  "description": "Include detailed metrics"
                }
              ]
            }
          }
        },
        {
          "name": "Get Performance Comparison",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/performance/comparison?timeRange=30",
              "host": ["{{base_url}}"],
              "path": ["performance", "comparison"],
              "query": [
                {
                  "key": "timeRange",
                  "value": "30",
                  "description": "Number of days to look back"
                }
              ]
            }
          }
        },
        {
          "name": "Get Performance Trends",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/performance/trends?period=monthly&months=6",
              "host": ["{{base_url}}"],
              "path": ["performance", "trends"],
              "query": [
                {
                  "key": "period",
                  "value": "monthly",
                  "description": "Period for trends"
                },
                {
                  "key": "months",
                  "value": "6",
                  "description": "Number of months to look back"
                }
              ]
            }
          }
        },
        {
          "name": "Get Staff Achievements",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/achievements?timeRange=30",
              "host": ["{{base_url}}"],
              "path": ["achievements"],
              "query": [
                {
                  "key": "timeRange",
                  "value": "30",
                  "description": "Number of days to look back"
                }
              ]
            }
          }
        },
        {
          "name": "Get Team Leaderboard",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/team/leaderboard?timeRange=30&limit=20",
              "host": ["{{base_url}}"],
              "path": ["team", "leaderboard"],
              "query": [
                {
                  "key": "timeRange",
                  "value": "30",
                  "description": "Number of days to look back"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of staff to return"
                }
              ]
            }
          }
        },
        {
          "name": "Get Analytics Data",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/analytics?timeRange=30",
              "host": ["{{base_url}}"],
              "path": ["analytics"],
              "query": [
                {
                  "key": "timeRange",
                  "value": "30",
                  "description": "Number of days to look back"
                }
              ]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-generate sample data for testing",
          "if (!pm.environment.get('sample_task_id')) {",
          "    pm.environment.set('sample_task_id', '507f1f77bcf86cd799439011');",
          "}",
          "if (!pm.environment.get('sample_event_id')) {",
          "    pm.environment.set('sample_event_id', '507f1f77bcf86cd799439012');",
          "}",
          "if (!pm.environment.get('sample_appointment_id')) {",
          "    pm.environment.set('sample_appointment_id', '507f1f77bcf86cd799439013');",
          "}",
        "if (!pm.environment.get('sample_staff_id')) {",
        "    pm.environment.set('sample_staff_id', '507f1f77bcf86cd799439014');",
        "}",
        "if (!pm.environment.get('sample_lead_id')) {",
        "    pm.environment.set('sample_lead_id', '507f1f77bcf86cd799439015');",
        "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Common test scripts",
          "pm.test('Status code is successful', function () {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 204]);",
          "});",
          "",
          "pm.test('Response has success field', function () {",
          "    const jsonData = pm.response.json();",
          "    pm.expect(jsonData).to.have.property('success');",
          "    pm.expect(jsonData.success).to.be.true;",
          "});",
          "",
          "pm.test('Response time is less than 2000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(2000);",
          "});"
        ]
      }
    }
  ]
}
